parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"VJtr":[function(require,module,exports) {
document.addEventListener("DOMContentLoaded",function(e){var t,s,o,l={map:[[2,2,1,2,2],[2,2,0,2,2],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,0,1,1]],person:[[0,0,1,0,0],[0,0,0,0,0],[0,1,1,1,0],[0,0,1,0,0],[0,1,1,1,0],[0,0,0,2,0]]},p=16,n=l.map[0].length,a=l.map.length,r=~~((p-n)/2),c=~~((p-a)/2),d=-297,i=[],m={},u={};function f(e){return!!e.offsetParent&&[e.offsetLeft,e.offsetTop]}function y(){return!i.some(function(e,t){return 0===l.person[i[t][0]][i[t][1]]})&&function(){console.log("You win!");var e=document.querySelector("#slacker2"),t=document.querySelector(".angel");t.style.top=e.offsetTop+"px",t.style.left=e.offsetLeft+"px",e.classList.add("dead"),t.classList.add("show"),document.querySelector("audio").play()}()}function v(e){return m={lastManager:{left:u.el.style.left,top:u.el.style.top,pos:u.pos.slice()},lastElem:null!==e&&{el:e.id,left:e.id.style.left,top:e.id.style.top,pos1:[e.prevPos[0],e.prevPos[1]],pos2:[e.curPos[0],e.curPos[1]]}}}function E(e,t){l.person[e][t]=0,y()}function g(e){e.stopPropagation();var t,s=u.pos[0],p=u.pos[1]-1;if(l.map[s][p]){var n=l.person[s][p];t=parseInt(u.el.style.left,10)-o+"px",n&&l.map[s][p-1]&&!l.person[s][p-1]?(v({id:n,prevPos:[s,p],curPos:[s,p-1]}),n.style.left=parseInt(n.style.left,10)-o+"px",l.person[s][p-1]=n,u.pos[1]=p,u.el.style.left=t,E(s,p)):n||(v(null),u.pos[1]=p,u.el.style.left=t)}}function h(e){e.stopPropagation();var t,s=u.pos[0]-1,p=u.pos[1];if(u.pos[0]>0&&l.map[s][p]){var n=l.person[s][p];t=parseInt(u.el.style.top,10)-o+"px",s+1>1&&n&&l.map[s-1][p]&&!l.person[s-1][p]?(v({id:n,prevPos:[s,p],curPos:[s-1,p]}),n.style.top=parseInt(n.style.top,10)-o+"px",l.person[s-1][p]=n,u.pos[0]=s,u.el.style.top=t,E(s,p)):n||(v(null),u.pos[0]=s,u.el.style.top=t)}}function P(e){e.stopPropagation();var t,s=u.pos[0],p=u.pos[1]+1;if(l.map[s][p]){var n=l.person[s][p];t=parseInt(u.el.style.left,10)+o+"px",n&&l.map[s][p+1]&&!l.person[s][p+1]?(v({id:n,prevPos:[s,p],curPos:[s,p+1]}),n.style.left=parseInt(n.style.left,10)+o+"px",l.person[s][p+1]=n,u.pos[1]=p,u.el.style.left=t,E(s,p)):n||(v(null),u.el.style.left=t,u.pos[1]=p)}}function L(e){e.stopPropagation();var t,s=u.pos[0]+1,p=u.pos[1];if(s-1<a-1&&l.map[s][p]){var n=l.person[s][p];t=parseInt(u.el.style.top,10)+o+"px",s-1<a-2&&n&&l.map[s+1][p]&&!l.person[s+1][p]?(v({id:n,prevPos:[s,p],curPos:[s+1,p]}),n.style.top=parseInt(n.style.top,10)+o+"px",l.person[s+1][p]=n,u.pos[0]=s,u.el.style.top=t,E(s,p)):n||(v(null),u.pos[0]=s,u.el.style.top=t)}}function x(e){switch(e.which){case 37:g(e);break;case 38:h(e);break;case 39:P(e);break;case 40:L(e);break;case 32:!function(){if(u.pos=m.lastManager.pos.slice(),u.el.style.left=m.lastManager.left,u.el.style.top=m.lastManager.top,m.lastElem){var e=m.lastElem.el;e.style.left=m.lastElem.left,e.style.top=m.lastElem.top,l.person[m.lastElem.pos1[0]][m.lastElem.pos1[1]]=e,l.person[m.lastElem.pos2[0]][m.lastElem.pos2[1]]=0}}();break;default:return!1}}!function(){var e=document.createDocumentFragment(),n=256,a=document.createElement("div"),m=document.querySelector(".map"),y=document.getElementById("start-game");for(a.className="angel",e.appendChild(a);n--;){var v=document.createElement("div");v.className="map-item",e.appendChild(v)}m.appendChild(e),t=document.querySelectorAll(".map-item"),o=document.querySelector(".map-item").clientWidth+3,function(){var e=document.createDocumentFragment(),n=0;l.map.forEach(function(a,m){l.map.forEach(function(a,y){var v,E=l.map[m][y],g=l.person[m][y];if(s=(c+m)*p+r+y,E>0&&t[s].classList.add("passage"),2===E&&(t[s].classList.add("workplace"),i.push([m,y])),1===g){var h="slacker"+n++;v=document.createElement("div"),d+=o-3,v.className="person employee",v.id=h,v.style.top=f(t[s])[1]+"px",v.style.left=f(t[s])[0]+"px",v.style.backgroundPosition=d+"px 0",e.appendChild(v),l.person[m][y]=v}2===g&&((v=document.createElement("div")).id="manager",v.className="person manager",v.style.top=f(t[s])[1]+"px",v.style.left=f(t[s])[0]+"px",e.appendChild(v),l.person[m][y]=0,u={el:v,pos:[m,y]})})}),document.querySelector(".map").appendChild(e)}(),document.addEventListener("keyup",x,!1),m.addEventListener("swipeLeft",g,!1),m.addEventListener("swipeUp",h,!1),m.addEventListener("swipeRight",P,!1),m.addEventListener("swipeDown",L,!1),y.addEventListener("click",function(e){e.preventDefault(),document.getElementById("dashboard").classList.add("hidden")},!1)}()});
},{}]},{},["VJtr"], null)