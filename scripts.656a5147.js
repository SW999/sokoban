parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"VJtr":[function(require,module,exports) {
document.addEventListener("DOMContentLoaded",function(e){var t,s,o,n={map:[[2,2,1,2,2],[2,2,0,2,2],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,0,1,1]],person:[[0,0,1,0,0],[0,0,0,0,0],[0,1,1,1,0],[0,0,1,0,0],[0,1,1,1,0],[0,0,0,2,0]]},l=16,p=n.map[0].length,a=n.map.length,r=~~((l-p)/2),c=~~((l-a)/2),d=-297,i=[],u={},m={};function f(e){return!!e.offsetParent&&[e.offsetLeft,e.offsetTop]}function y(){return!i.some(function(e,t){return 0===n.person[i[t][0]][i[t][1]]})&&function(){console.log("You win!");var e=document.querySelector("#slacker2"),t=document.querySelector(".angel");t.style.top=e.offsetTop+"px",t.style.left=e.offsetLeft+"px",e.classList.add("dead"),t.classList.add("show"),document.querySelector("audio").play()}()}function v(e){return u={lastManager:{left:m.el.style.left,top:m.el.style.top,pos:m.pos.slice()},lastElem:null!==e&&{el:e.id,left:e.id.style.left,top:e.id.style.top,pos1:[e.prevPos[0],e.prevPos[1]],pos2:[e.curPos[0],e.curPos[1]]}}}function E(e,t){n.person[e][t]=0,y()}function g(e){e.stopPropagation();var t,s=m.pos[0],l=m.pos[1]-1;if(n.map[s][l]){var p=n.person[s][l];t=parseInt(m.el.style.left,10)-o+"px",p&&n.map[s][l-1]&&!n.person[s][l-1]?(v({id:p,prevPos:[s,l],curPos:[s,l-1]}),p.style.left=parseInt(p.style.left,10)-o+"px",n.person[s][l-1]=p,m.pos[1]=l,m.el.style.left=t,E(s,l)):p||(v(null),m.pos[1]=l,m.el.style.left=t)}}function h(e){e.stopPropagation();var t,s=m.pos[0]-1,l=m.pos[1];if(m.pos[0]>0&&n.map[s][l]){var p=n.person[s][l];t=parseInt(m.el.style.top,10)-o+"px",s+1>1&&p&&n.map[s-1][l]&&!n.person[s-1][l]?(v({id:p,prevPos:[s,l],curPos:[s-1,l]}),p.style.top=parseInt(p.style.top,10)-o+"px",n.person[s-1][l]=p,m.pos[0]=s,m.el.style.top=t,E(s,l)):p||(v(null),m.pos[0]=s,m.el.style.top=t)}}function L(e){e.stopPropagation();var t,s=m.pos[0],l=m.pos[1]+1;if(n.map[s][l]){var p=n.person[s][l];t=parseInt(m.el.style.left,10)+o+"px",p&&n.map[s][l+1]&&!n.person[s][l+1]?(v({id:p,prevPos:[s,l],curPos:[s,l+1]}),p.style.left=parseInt(p.style.left,10)+o+"px",n.person[s][l+1]=p,m.pos[1]=l,m.el.style.left=t,E(s,l)):p||(v(null),m.el.style.left=t,m.pos[1]=l)}}function P(e){e.stopPropagation();var t,s=m.pos[0]+1,l=m.pos[1];if(s-1<a-1&&n.map[s][l]){var p=n.person[s][l];t=parseInt(m.el.style.top,10)+o+"px",s-1<a-2&&p&&n.map[s+1][l]&&!n.person[s+1][l]?(v({id:p,prevPos:[s,l],curPos:[s+1,l]}),p.style.top=parseInt(p.style.top,10)+o+"px",n.person[s+1][l]=p,m.pos[0]=s,m.el.style.top=t,E(s,l)):p||(v(null),m.pos[0]=s,m.el.style.top=t)}}function x(){if(m.pos=u.lastManager.pos.slice(),m.el.style.left=u.lastManager.left,m.el.style.top=u.lastManager.top,u.lastElem){var e=u.lastElem.el;e.style.left=u.lastElem.left,e.style.top=u.lastElem.top,n.person[u.lastElem.pos1[0]][u.lastElem.pos1[1]]=e,n.person[u.lastElem.pos2[0]][u.lastElem.pos2[1]]=0}}function I(e){switch(e.which){case 37:g(e);break;case 38:h(e);break;case 39:L(e);break;case 40:P(e);break;case 32:x();break;default:return!1}}!function(){var e=document.createDocumentFragment(),p=256,a=document.createElement("div"),u=document.querySelector(".map"),y=document.getElementById("start-game");for(a.className="angel",e.appendChild(a);p--;){var v=document.createElement("div");v.className="map-item",e.appendChild(v)}u.appendChild(e),t=document.querySelectorAll(".map-item"),o=document.querySelector(".map-item").clientWidth+3,function(){var e=document.createDocumentFragment(),p=0;n.map.forEach(function(a,u){n.map.forEach(function(a,y){var v,E=n.map[u][y],g=n.person[u][y];if(s=(c+u)*l+r+y,E>0&&t[s].classList.add("passage"),2===E&&(t[s].classList.add("workplace"),i.push([u,y])),1===g){var h="slacker"+p++;v=document.createElement("div"),d+=o-3,v.className="person employee",v.id=h,v.style.top=f(t[s])[1]+"px",v.style.left=f(t[s])[0]+"px",v.style.backgroundPosition=d+"px 0",e.appendChild(v),n.person[u][y]=v}2===g&&((v=document.createElement("div")).id="manager",v.className="person manager",v.style.top=f(t[s])[1]+"px",v.style.left=f(t[s])[0]+"px",e.appendChild(v),n.person[u][y]=0,m={el:v,pos:[u,y]})})}),document.querySelector(".map").appendChild(e)}(),document.documentElement.classList.contains("touch")?(document.getElementById("controls-definition").textContent="swipe gestures",document.getElementById("undo-definition").textContent="undo button",u.addEventListener("swipeLeft",g,!1),u.addEventListener("swipeUp",h,!1),u.addEventListener("swipeRight",L,!1),u.addEventListener("swipeDown",P,!1),y.addEventListener("click",function(e){e.preventDefault(),document.getElementById("dashboard").classList.add("hidden")},!1),document.getElementById("undoBtn").addEventListener("click",x,!1)):document.addEventListener("keyup",I,!1)}()});
},{}]},{},["VJtr"], null)