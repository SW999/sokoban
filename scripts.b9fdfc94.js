parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"VJtr":[function(require,module,exports) {
document.addEventListener("DOMContentLoaded",function(e){var t,s,o={map:[[2,2,1,2,2],[2,2,0,2,2],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,0,1,1]],person:[[0,0,1,0,0],[0,0,0,0,0],[0,1,1,1,0],[0,0,1,0,0],[0,1,1,1,0],[0,0,0,2,0]]},n=16,l=o.map[0].length,p=o.map.length,a=~~((n-l)/2),r=~~((n-p)/2),c=-297,d=[],i={},u={};function m(e){if(e.offsetParent)return[e.offsetLeft,e.offsetTop]}function f(){return!d.some(function(e,t){return 0===o.person[d[t][0]][d[t][1]]})&&function(){console.log("You win!");var e=document.querySelector("#slacker2"),t=document.querySelector(".angel");t.style.top=e.offsetTop+"px",t.style.left=e.offsetLeft+"px",e.classList.add("dead"),t.classList.add("show"),document.querySelector("audio").play()}()}function y(e){return i={lastManager:{left:u.el.style.left,top:u.el.style.top,pos:u.pos.slice()},lastElem:null!==e&&{el:e.id,left:e.id.style.left,top:e.id.style.top,pos1:[e.prevPos[0],e.prevPos[1]],pos2:[e.curPos[0],e.curPos[1]]}}}function v(e,t){o.person[e][t]=0,f()}function E(e){e.stopPropagation();var t,n=u.pos[0],l=u.pos[1]-1;if(o.map[n][l]){var p=o.person[n][l];t=parseInt(u.el.style.left,10)-s+"px",p&&o.map[n][l-1]&&!o.person[n][l-1]?(y({id:p,prevPos:[n,l],curPos:[n,l-1]}),p.style.left=parseInt(p.style.left,10)-s+"px",o.person[n][l-1]=p,u.pos[1]=l,u.el.style.left=t,v(n,l)):p||(y(null),u.pos[1]=l,u.el.style.left=t)}}function g(e){e.stopPropagation();var t,n=u.pos[0]-1,l=u.pos[1];if(u.pos[0]>0&&o.map[n][l]){var p=o.person[n][l];t=parseInt(u.el.style.top,10)-s+"px",n+1>1&&p&&o.map[n-1][l]&&!o.person[n-1][l]?(y({id:p,prevPos:[n,l],curPos:[n-1,l]}),p.style.top=parseInt(p.style.top,10)-s+"px",o.person[n-1][l]=p,u.pos[0]=n,u.el.style.top=t,v(n,l)):p||(y(null),u.pos[0]=n,u.el.style.top=t)}}function h(e){e.stopPropagation();var t,n=u.pos[0],l=u.pos[1]+1;if(o.map[n][l]){var p=o.person[n][l];t=parseInt(u.el.style.left,10)+s+"px",p&&o.map[n][l+1]&&!o.person[n][l+1]?(y({id:p,prevPos:[n,l],curPos:[n,l+1]}),p.style.left=parseInt(p.style.left,10)+s+"px",o.person[n][l+1]=p,u.pos[1]=l,u.el.style.left=t,v(n,l)):p||(y(null),u.el.style.left=t,u.pos[1]=l)}}function L(e){e.stopPropagation();var t,n=u.pos[0]+1,l=u.pos[1];if(n-1<p-1&&o.map[n][l]){var a=o.person[n][l];t=parseInt(u.el.style.top,10)+s+"px",n-1<p-2&&a&&o.map[n+1][l]&&!o.person[n+1][l]?(y({id:a,prevPos:[n,l],curPos:[n+1,l]}),a.style.top=parseInt(a.style.top,10)+s+"px",o.person[n+1][l]=a,u.pos[0]=n,u.el.style.top=t,v(n,l)):a||(y(null),u.pos[0]=n,u.el.style.top=t)}}function P(){if(u.pos=i.lastManager.pos.slice(),u.el.style.left=i.lastManager.left,u.el.style.top=i.lastManager.top,i.lastElem){var e=i.lastElem.el;e.style.left=i.lastElem.left,e.style.top=i.lastElem.top,o.person[i.lastElem.pos1[0]][i.lastElem.pos1[1]]=e,o.person[i.lastElem.pos2[0]][i.lastElem.pos2[1]]=0}}function x(e){switch(e.which){case 37:E(e);break;case 38:g(e);break;case 39:h(e);break;case 40:L(e);break;case 32:P();break;default:return!1}}!function(){var e=document.createDocumentFragment(),l=256,p=document.createElement("div"),i=document.querySelector(".map"),f=document.getElementById("start-game");for(p.className="angel",e.appendChild(p);l--;){var y=document.createElement("div");y.className="map-item",e.appendChild(y)}i.appendChild(e),t=document.querySelectorAll(".map-item"),s=document.querySelector(".map-item").clientWidth+3,function(){var e=document.createDocumentFragment(),l=0;o.map.forEach(function(p,i){o.map.forEach(function(p,f){var y,v=o.map[i][f],E=o.person[i][f],g=(r+i)*n+a+f;if(1===v&&t[g].classList.add("passage"),2===v&&(t[g].classList.add("workplace"),d.push([i,f])),1===E){var h="slacker"+l++;y=document.createElement("div"),c+=s-3,y.className="person employee",y.id=h,y.style.top=m(t[g])[1]+"px",y.style.left=m(t[g])[0]+"px",y.style.backgroundPosition=c+"px 0",e.appendChild(y),o.person[i][f]=y}2===E&&((y=document.createElement("div")).id="manager",y.className="person manager",y.style.top=m(t[g])[1]+"px",y.style.left=m(t[g])[0]+"px",e.appendChild(y),o.person[i][f]=0,u={el:y,pos:[i,f]})})}),document.querySelector(".map").appendChild(e)}(),document.documentElement.classList.contains("touch")?(document.getElementById("controls-definition").textContent="swipe gestures",document.getElementById("undo-definition").textContent="undo button",i.addEventListener("swipeLeft",E,!1),i.addEventListener("swipeUp",g,!1),i.addEventListener("swipeRight",h,!1),i.addEventListener("swipeDown",L,!1),f.addEventListener("click",function(e){e.preventDefault(),document.getElementById("dashboard").classList.add("hidden")},!1),document.getElementById("undoBtn").addEventListener("click",P,!1)):document.addEventListener("keyup",x,!1)}()});
},{}]},{},["VJtr"], null)